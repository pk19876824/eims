{"ast":null,"code":"import _objectSpread from \"/Users/zhangjunjie/WebstormProjects/eims-react1/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/zhangjunjie/WebstormProjects/eims-react1/src/components/MyTable.js\";\nimport React, { Component } from 'react';\nimport { Button, Icon, Input, Table } from 'antd';\nimport reqwest from 'reqwest';\n\nclass MyTable extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetch = (params = {}) => {\n      console.log('params:', params);\n      this.setState({\n        loading: true\n      });\n      reqwest({\n        url: MyTable.searchUrl,\n        method: 'get',\n        data: _objectSpread({\n          results: 10\n        }, params),\n        type: 'json'\n      }).then(data => {\n        const pagination = _objectSpread({}, this.state.pagination); // Read total count from server\n        // pagination.total = data.totalCount;\n\n\n        pagination.total = data.data.count;\n        this.setState({\n          loading: false,\n          data: data.data.results,\n          pagination\n        });\n      });\n      this.setState({\n        loading: false\n      });\n    };\n\n    this.handleDelete = key => {\n      console.log(key);\n    };\n\n    this.handleTableChange = (pagination, filters, sorter) => {\n      const pager = _objectSpread({}, this.state.pagination);\n\n      pager.current = pagination.current;\n      this.setState({\n        pagination: pager\n      });\n      this.fetch(_objectSpread({\n        results: pagination.pageSize,\n        page: pagination.current,\n        sortField: sorter.field,\n        sortOrder: sorter.order\n      }, filters));\n    };\n\n    this.state = {\n      data: [],\n      pagination: {},\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  render() {\n    const columns = [{\n      title: '姓名',\n      dataIndex: 'name',\n      render: name => \"\".concat(name),\n      width: '20%'\n    }, {\n      title: '年龄',\n      dataIndex: 'age',\n      sorter: true,\n      width: '15%'\n    }, {\n      title: '性别',\n      dataIndex: 'gender',\n      filters: [{\n        text: 'Male',\n        value: '0'\n      }, {\n        text: 'Female',\n        value: '1'\n      }],\n      width: '15%'\n    }, {\n      title: '部门',\n      dataIndex: 'department',\n      filters: [{\n        text: '产品部',\n        value: '1'\n      }, {\n        text: '技术部',\n        value: '2'\n      }, {\n        text: '运营部',\n        value: '3'\n      }, {\n        text: '行政部',\n        value: '4'\n      }, {\n        text: '采购部',\n        value: '5'\n      }],\n      width: '20%'\n    }, {\n      title: '职位',\n      dataIndex: 'level',\n      filters: [{\n        text: '普通职员',\n        value: '1'\n      }, {\n        text: '组长',\n        value: '2'\n      }, {\n        text: '经理',\n        value: '3'\n      }, {\n        text: '总监',\n        value: '4'\n      }, {\n        text: '董事长',\n        value: '5'\n      }],\n      width: '20%'\n    }, {\n      title: 'Action',\n      dataIndex: '',\n      key: 'id',\n      render: id => React.createElement(Button, {\n        onClick: this.handleDelete(id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Delete\"),\n      width: '10%'\n    }];\n    return React.createElement(Table, {\n      bordered: true,\n      columns: columns,\n      rowKey: record => record.id,\n      dataSource: this.state.data,\n      pagination: this.state.pagination,\n      loading: this.state.loading,\n      onChange: this.handleTableChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    });\n  }\n\n}\n\nMyTable.searchUrl = 'http://localhost:8888/employee';\nexport default MyTable;","map":{"version":3,"sources":["/Users/zhangjunjie/WebstormProjects/eims-react1/src/components/MyTable.js"],"names":["React","Component","Button","Icon","Input","Table","reqwest","MyTable","constructor","props","fetch","params","console","log","setState","loading","url","searchUrl","method","data","results","type","then","pagination","state","total","count","handleDelete","key","handleTableChange","filters","sorter","pager","current","pageSize","page","sortField","field","sortOrder","order","componentDidMount","render","columns","title","dataIndex","name","width","text","value","id","record"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Button, Icon, Input, Table} from 'antd';\nimport reqwest from 'reqwest';\n\nclass MyTable extends Component {\n\n    static searchUrl = 'http://localhost:8888/employee';\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: [],\n            pagination: {},\n            loading: false,\n        };\n    };\n\n    componentDidMount() {\n        this.fetch();\n    }\n\n    fetch = (params = {}) => {\n        console.log('params:', params);\n        this.setState({loading: true});\n        reqwest({\n            url: MyTable.searchUrl,\n            method: 'get',\n            data: {\n                results: 10,\n                ...params,\n            },\n            type: 'json',\n        }).then((data) => {\n            const pagination = {...this.state.pagination};\n            // Read total count from server\n            // pagination.total = data.totalCount;\n            pagination.total = data.data.count;\n            this.setState({\n                loading: false,\n                data: data.data.results,\n                pagination,\n            });\n        });\n        this.setState({\n            loading: false\n        })\n    };\n\n    handleDelete = (key) => {\n        console.log(key);\n    };\n\n    handleTableChange = (pagination, filters, sorter) => {\n        const pager = {...this.state.pagination};\n        pager.current = pagination.current;\n        this.setState({\n            pagination: pager,\n        });\n        this.fetch({\n            results: pagination.pageSize,\n            page: pagination.current,\n            sortField: sorter.field,\n            sortOrder: sorter.order,\n            ...filters,\n        });\n    };\n\n    render() {\n        const columns = [{\n            title: '姓名',\n            dataIndex: 'name',\n            render: name => `${name}`,\n            width: '20%',\n        }, {\n            title: '年龄',\n            dataIndex: 'age',\n            sorter: true,\n            width: '15%'\n        }, {\n            title: '性别',\n            dataIndex: 'gender',\n            filters: [\n                {text: 'Male', value: '0'},\n                {text: 'Female', value: '1'},\n            ],\n            width: '15%',\n        }, {\n            title: '部门',\n            dataIndex: 'department',\n            filters: [\n                {text: '产品部', value: '1'},\n                {text: '技术部', value: '2'},\n                {text: '运营部', value: '3'},\n                {text: '行政部', value: '4'},\n                {text: '采购部', value: '5'},\n            ],\n            width: '20%',\n        }, {\n            title: '职位',\n            dataIndex: 'level',\n            filters: [\n                {text: '普通职员', value: '1'},\n                {text: '组长', value: '2'},\n                {text: '经理', value: '3'},\n                {text: '总监', value: '4'},\n                {text: '董事长', value: '5'},\n            ],\n            width: '20%',\n        }, {\n            title: 'Action',\n            dataIndex: '',\n            key: 'id',\n            render: (id) => <Button onClick={this.handleDelete(id)}>Delete</Button>,\n            width: '10%',\n        },];\n\n        return (\n            <Table\n                bordered={true}\n                columns={columns}\n                rowKey={record => record.id}\n                dataSource={this.state.data}\n                pagination={this.state.pagination}\n                loading={this.state.loading}\n                onChange={this.handleTableChange}\n            />\n        )\n    };\n}\n\nexport default MyTable;"]},"metadata":{},"sourceType":"module"}