{"ast":null,"code":"import _objectSpread from \"/Users/zhangjunjie/WebstormProjects/eims-react1/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/zhangjunjie/WebstormProjects/eims-react1/src/components/MyTable.js\";\nimport React, { Component } from 'react';\nimport { Button, Modal, Input, Table } from 'antd';\nimport reqwest from 'reqwest';\nconst confirm = Modal.confirm;\n\nclass MyTable extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetch = (params = {}) => {\n      console.log('params:', params);\n      this.setState({\n        loading: true\n      });\n      reqwest({\n        url: MyTable.searchUrl,\n        method: 'get',\n        data: _objectSpread({\n          results: 10\n        }, params),\n        type: 'json'\n      }).then(data => {\n        const pagination = _objectSpread({}, this.state.pagination); // Read total count from server\n        // pagination.total = data.totalCount;\n\n\n        pagination.total = data.data.count;\n        this.setState({\n          loading: false,\n          data: data.data.results,\n          pagination\n        });\n      });\n      this.setState({\n        loading: false\n      });\n    };\n\n    this.handleTableChange = (pagination, filters, sorter) => {\n      const pager = _objectSpread({}, this.state.pagination);\n\n      pager.current = pagination.current;\n      this.setState({\n        pagination: pager\n      });\n      this.fetch(_objectSpread({\n        results: pagination.pageSize,\n        page: pagination.current,\n        sortField: sorter.field,\n        sortOrder: sorter.order\n      }, filters));\n    };\n\n    this.onSelectChange = selectedRowKeys => {\n      console.log('selectedRowKeys changed: ', selectedRowKeys);\n      this.setState({\n        selectedRowKeys\n      });\n    };\n\n    this.state = {\n      data: [],\n      pagination: {},\n      loading: false,\n      deleteLoading: false,\n      selectedRowKeys: []\n    };\n    this.handleDelete = this.handleDelete.bind(this);\n    this.showDeleteConfirm = this.showDeleteConfirm.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  handleDelete() {\n    const selectedRowKeys = this.state.selectedRowKeys;\n    console.log(selectedRowKeys);\n    this.showDeleteConfirm(selectedRowKeys);\n  }\n\n  showDeleteConfirm() {\n    const selectedRowKeys = this.state.selectedRowKeys;\n    const selectedCount = selectedRowKeys.length;\n    confirm({\n      title: '确定删除这' + selectedCount + '个员工？',\n      content: selectedRowKeys,\n      okText: '确定',\n      okType: 'danger',\n      cancelText: '取消',\n\n      onOk() {\n        console.log('OK');\n      },\n\n      onCancel() {\n        console.log('Cancel');\n      }\n\n    });\n  }\n\n  render() {\n    const columns = [{\n      title: '姓名',\n      dataIndex: 'name',\n      render: name => \"\".concat(name),\n      width: '20%'\n    }, {\n      title: '年龄',\n      dataIndex: 'age',\n      sorter: true,\n      width: '20%'\n    }, {\n      title: '性别',\n      dataIndex: 'gender',\n      filters: [{\n        text: 'Male',\n        value: '0'\n      }, {\n        text: 'Female',\n        value: '1'\n      }],\n      width: '20%'\n    }, {\n      title: '部门',\n      dataIndex: 'department',\n      filters: [{\n        text: '产品部',\n        value: '1'\n      }, {\n        text: '技术部',\n        value: '2'\n      }, {\n        text: '运营部',\n        value: '3'\n      }, {\n        text: '行政部',\n        value: '4'\n      }, {\n        text: '采购部',\n        value: '5'\n      }],\n      width: '20%'\n    }, {\n      title: '职位',\n      dataIndex: 'level',\n      filters: [{\n        text: '普通职员',\n        value: '1'\n      }, {\n        text: '组长',\n        value: '2'\n      }, {\n        text: '经理',\n        value: '3'\n      }, {\n        text: '总监',\n        value: '4'\n      }, {\n        text: '董事长',\n        value: '5'\n      }],\n      width: '20%'\n    }];\n    const _this$state = this.state,\n          deleteLoading = _this$state.deleteLoading,\n          selectedRowKeys = _this$state.selectedRowKeys;\n    const rowSelection = {\n      selectedRowKeys,\n      onChange: this.onSelectChange\n    };\n    const hasSelected = selectedRowKeys.length > 0;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      onClick: this.showDeleteConfirm,\n      disabled: !hasSelected,\n      loading: deleteLoading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Delete\"), React.createElement(\"span\", {\n      style: {\n        marginLeft: 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, hasSelected ? \"Selected \".concat(selectedRowKeys.length, \" items\") : '')), React.createElement(Table, {\n      rowSelection: rowSelection,\n      bordered: true,\n      columns: columns,\n      rowKey: record => record.id,\n      dataSource: this.state.data,\n      pagination: this.state.pagination,\n      loading: this.state.loading,\n      onChange: this.handleTableChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }));\n  }\n\n}\n\nMyTable.searchUrl = 'http://localhost:8888/employee';\nexport default MyTable;","map":{"version":3,"sources":["/Users/zhangjunjie/WebstormProjects/eims-react1/src/components/MyTable.js"],"names":["React","Component","Button","Modal","Input","Table","reqwest","confirm","MyTable","constructor","props","fetch","params","console","log","setState","loading","url","searchUrl","method","data","results","type","then","pagination","state","total","count","handleTableChange","filters","sorter","pager","current","pageSize","page","sortField","field","sortOrder","order","onSelectChange","selectedRowKeys","deleteLoading","handleDelete","bind","showDeleteConfirm","componentDidMount","selectedCount","length","title","content","okText","okType","cancelText","onOk","onCancel","render","columns","dataIndex","name","width","text","value","rowSelection","onChange","hasSelected","marginBottom","marginLeft","record","id"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Button, Modal, Input, Table} from 'antd';\nimport reqwest from 'reqwest';\n\nconst confirm = Modal.confirm;\n\nclass MyTable extends Component {\n\n    static searchUrl = 'http://localhost:8888/employee';\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: [],\n            pagination: {},\n            loading: false,\n            deleteLoading: false,\n            selectedRowKeys: [],\n        };\n        this.handleDelete = this.handleDelete.bind(this);\n        this.showDeleteConfirm = this.showDeleteConfirm.bind(this);\n    };\n\n    componentDidMount() {\n        this.fetch();\n    }\n\n    fetch = (params = {}) => {\n        console.log('params:', params);\n        this.setState({loading: true});\n        reqwest({\n            url: MyTable.searchUrl,\n            method: 'get',\n            data: {\n                results: 10,\n                ...params,\n            },\n            type: 'json',\n        }).then((data) => {\n            const pagination = {...this.state.pagination};\n            // Read total count from server\n            // pagination.total = data.totalCount;\n            pagination.total = data.data.count;\n            this.setState({\n                loading: false,\n                data: data.data.results,\n                pagination,\n            });\n        });\n        this.setState({\n            loading: false\n        })\n    };\n\n    handleDelete() {\n        const {selectedRowKeys} = this.state;\n        console.log(selectedRowKeys);\n        this.showDeleteConfirm(selectedRowKeys);\n    };\n\n    showDeleteConfirm() {\n        const {selectedRowKeys} = this.state;\n        const selectedCount = selectedRowKeys.length;\n        confirm({\n            title: '确定删除这' + selectedCount + '个员工？',\n            content: selectedRowKeys,\n            okText: '确定',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk() {\n                console.log('OK');\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    handleTableChange = (pagination, filters, sorter) => {\n        const pager = {...this.state.pagination};\n        pager.current = pagination.current;\n        this.setState({\n            pagination: pager,\n        });\n        this.fetch({\n            results: pagination.pageSize,\n            page: pagination.current,\n            sortField: sorter.field,\n            sortOrder: sorter.order,\n            ...filters,\n        });\n    };\n\n    onSelectChange = (selectedRowKeys) => {\n        console.log('selectedRowKeys changed: ', selectedRowKeys);\n        this.setState({selectedRowKeys});\n    };\n\n    render() {\n        const columns = [{\n            title: '姓名',\n            dataIndex: 'name',\n            render: name => `${name}`,\n            width: '20%',\n        }, {\n            title: '年龄',\n            dataIndex: 'age',\n            sorter: true,\n            width: '20%'\n        }, {\n            title: '性别',\n            dataIndex: 'gender',\n            filters: [\n                {text: 'Male', value: '0'},\n                {text: 'Female', value: '1'},\n            ],\n            width: '20%',\n        }, {\n            title: '部门',\n            dataIndex: 'department',\n            filters: [\n                {text: '产品部', value: '1'},\n                {text: '技术部', value: '2'},\n                {text: '运营部', value: '3'},\n                {text: '行政部', value: '4'},\n                {text: '采购部', value: '5'},\n            ],\n            width: '20%',\n        }, {\n            title: '职位',\n            dataIndex: 'level',\n            filters: [\n                {text: '普通职员', value: '1'},\n                {text: '组长', value: '2'},\n                {text: '经理', value: '3'},\n                {text: '总监', value: '4'},\n                {text: '董事长', value: '5'},\n            ],\n            width: '20%',\n        },];\n\n        const {deleteLoading, selectedRowKeys} = this.state;\n        const rowSelection = {\n            selectedRowKeys,\n            onChange: this.onSelectChange,\n        };\n        const hasSelected = selectedRowKeys.length > 0;\n\n\n        return (\n            <div>\n                <div style={{marginBottom: 16}}>\n                    <Button\n                        type=\"primary\"\n                        onClick={this.showDeleteConfirm}\n                        disabled={!hasSelected}\n                        loading={deleteLoading}\n                    >\n                        Delete\n                    </Button>\n                    <span style={{marginLeft: 8}}>\n                        {hasSelected ? `Selected ${selectedRowKeys.length} items` : ''}\n                    </span>\n                </div>\n                <Table\n                    rowSelection={rowSelection}\n                    bordered={true}\n                    columns={columns}\n                    rowKey={record => record.id}\n                    dataSource={this.state.data}\n                    pagination={this.state.pagination}\n                    loading={this.state.loading}\n                    onChange={this.handleTableChange}\n                />\n            </div>\n\n        )\n    };\n}\n\nexport default MyTable;"]},"metadata":{},"sourceType":"module"}