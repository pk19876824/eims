{"ast":null,"code":"import _objectSpread from \"/Users/zhangjunjie/WebstormProjects/eims-react1/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/zhangjunjie/WebstormProjects/eims-react1/src/components/MyTable.js\";\nimport React, { Component } from 'react';\nimport { Button, Modal, Input, Table } from 'antd';\nimport reqwest from 'reqwest';\nconst confirm = Modal.confirm;\n\nclass MyTable extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetch = (params = {}) => {\n      console.log('params:', params);\n      this.setState({\n        loading: true\n      });\n      reqwest({\n        url: MyTable.searchUrl,\n        method: 'get',\n        data: _objectSpread({\n          results: 10\n        }, params),\n        type: 'json'\n      }).then(data => {\n        const pagination = _objectSpread({}, this.state.pagination); // Read total count from server\n        // pagination.total = data.totalCount;\n\n\n        pagination.total = data.data.count;\n        this.setState({\n          loading: false,\n          data: data.data.results,\n          pagination\n        });\n      });\n      this.setState({\n        loading: false\n      });\n    };\n\n    this.handleDelete = record => {\n      console.log(record);\n    };\n\n    this.handleTableChange = (pagination, filters, sorter) => {\n      const pager = _objectSpread({}, this.state.pagination);\n\n      pager.current = pagination.current;\n      this.setState({\n        pagination: pager\n      });\n      this.fetch(_objectSpread({\n        results: pagination.pageSize,\n        page: pagination.current,\n        sortField: sorter.field,\n        sortOrder: sorter.order\n      }, filters));\n    };\n\n    this.onSelectChange = selectedRowKeys => {\n      console.log('selectedRowKeys changed: ', selectedRowKeys);\n      this.setState({\n        selectedRowKeys\n      });\n    };\n\n    this.state = {\n      data: [],\n      pagination: {},\n      loading: false,\n      deleteLoading: false,\n      selectedRowKeys: []\n    }; //this.handleDelete = this.handleDelete.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetch();\n  }\n\n  showDeleteConfirm(record) {\n    confirm({\n      title: record => '确定删除?',\n      //content: 'Some descriptions',\n      okText: '确定',\n      okType: 'danger',\n      cancelText: '取消',\n\n      onOk() {\n        console.log('OK');\n      },\n\n      onCancel() {\n        console.log('Cancel');\n      }\n\n    });\n  }\n\n  render() {\n    const columns = [{\n      title: '姓名',\n      dataIndex: 'name',\n      render: name => \"\".concat(name),\n      width: '20%'\n    }, {\n      title: '年龄',\n      dataIndex: 'age',\n      sorter: true,\n      width: '20%'\n    }, {\n      title: '性别',\n      dataIndex: 'gender',\n      filters: [{\n        text: 'Male',\n        value: '0'\n      }, {\n        text: 'Female',\n        value: '1'\n      }],\n      width: '20%'\n    }, {\n      title: '部门',\n      dataIndex: 'department',\n      filters: [{\n        text: '产品部',\n        value: '1'\n      }, {\n        text: '技术部',\n        value: '2'\n      }, {\n        text: '运营部',\n        value: '3'\n      }, {\n        text: '行政部',\n        value: '4'\n      }, {\n        text: '采购部',\n        value: '5'\n      }],\n      width: '20%'\n    }, {\n      title: '职位',\n      dataIndex: 'level',\n      filters: [{\n        text: '普通职员',\n        value: '1'\n      }, {\n        text: '组长',\n        value: '2'\n      }, {\n        text: '经理',\n        value: '3'\n      }, {\n        text: '总监',\n        value: '4'\n      }, {\n        text: '董事长',\n        value: '5'\n      }],\n      width: '20%'\n    }];\n    const _this$state = this.state,\n          deleteLoading = _this$state.deleteLoading,\n          selectedRowKeys = _this$state.selectedRowKeys;\n    const rowSelection = {\n      selectedRowKeys,\n      onChange: this.onSelectChange\n    };\n    const hasSelected = selectedRowKeys.length > 0;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\" //onClick={this.start}\n      ,\n      disabled: !hasSelected,\n      loading: deleteLoading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Delete\"), React.createElement(\"span\", {\n      style: {\n        marginLeft: 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, hasSelected ? \"Selected \".concat(selectedRowKeys.length, \" items\") : '')), React.createElement(Table, {\n      rowSelection: rowSelection,\n      bordered: true,\n      columns: columns,\n      rowKey: record => record.id,\n      dataSource: this.state.data,\n      pagination: this.state.pagination,\n      loading: this.state.loading,\n      onChange: this.handleTableChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }));\n  }\n\n}\n\nMyTable.searchUrl = 'http://localhost:8888/employee';\nexport default MyTable;","map":{"version":3,"sources":["/Users/zhangjunjie/WebstormProjects/eims-react1/src/components/MyTable.js"],"names":["React","Component","Button","Modal","Input","Table","reqwest","confirm","MyTable","constructor","props","fetch","params","console","log","setState","loading","url","searchUrl","method","data","results","type","then","pagination","state","total","count","handleDelete","record","handleTableChange","filters","sorter","pager","current","pageSize","page","sortField","field","sortOrder","order","onSelectChange","selectedRowKeys","deleteLoading","componentDidMount","showDeleteConfirm","title","okText","okType","cancelText","onOk","onCancel","render","columns","dataIndex","name","width","text","value","rowSelection","onChange","hasSelected","length","marginBottom","marginLeft","id"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Button, Modal, Input, Table} from 'antd';\nimport reqwest from 'reqwest';\n\nconst confirm = Modal.confirm;\n\nclass MyTable extends Component {\n\n    static searchUrl = 'http://localhost:8888/employee';\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: [],\n            pagination: {},\n            loading: false,\n            deleteLoading: false,\n            selectedRowKeys: [],\n        };\n        //this.handleDelete = this.handleDelete.bind(this);\n    };\n\n    componentDidMount() {\n        this.fetch();\n    }\n\n    fetch = (params = {}) => {\n        console.log('params:', params);\n        this.setState({loading: true});\n        reqwest({\n            url: MyTable.searchUrl,\n            method: 'get',\n            data: {\n                results: 10,\n                ...params,\n            },\n            type: 'json',\n        }).then((data) => {\n            const pagination = {...this.state.pagination};\n            // Read total count from server\n            // pagination.total = data.totalCount;\n            pagination.total = data.data.count;\n            this.setState({\n                loading: false,\n                data: data.data.results,\n                pagination,\n            });\n        });\n        this.setState({\n            loading: false\n        })\n    };\n\n    handleDelete = (record) => {\n        console.log(record);\n    };\n\n    showDeleteConfirm(record) {\n        confirm({\n            title: record => '确定删除?',\n            //content: 'Some descriptions',\n            okText: '确定',\n            okType: 'danger',\n            cancelText: '取消',\n            onOk() {\n                console.log('OK');\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    handleTableChange = (pagination, filters, sorter) => {\n        const pager = {...this.state.pagination};\n        pager.current = pagination.current;\n        this.setState({\n            pagination: pager,\n        });\n        this.fetch({\n            results: pagination.pageSize,\n            page: pagination.current,\n            sortField: sorter.field,\n            sortOrder: sorter.order,\n            ...filters,\n        });\n    };\n\n    onSelectChange = (selectedRowKeys) => {\n        console.log('selectedRowKeys changed: ', selectedRowKeys);\n        this.setState({selectedRowKeys});\n    };\n\n    render() {\n        const columns = [{\n            title: '姓名',\n            dataIndex: 'name',\n            render: name => `${name}`,\n            width: '20%',\n        }, {\n            title: '年龄',\n            dataIndex: 'age',\n            sorter: true,\n            width: '20%'\n        }, {\n            title: '性别',\n            dataIndex: 'gender',\n            filters: [\n                {text: 'Male', value: '0'},\n                {text: 'Female', value: '1'},\n            ],\n            width: '20%',\n        }, {\n            title: '部门',\n            dataIndex: 'department',\n            filters: [\n                {text: '产品部', value: '1'},\n                {text: '技术部', value: '2'},\n                {text: '运营部', value: '3'},\n                {text: '行政部', value: '4'},\n                {text: '采购部', value: '5'},\n            ],\n            width: '20%',\n        }, {\n            title: '职位',\n            dataIndex: 'level',\n            filters: [\n                {text: '普通职员', value: '1'},\n                {text: '组长', value: '2'},\n                {text: '经理', value: '3'},\n                {text: '总监', value: '4'},\n                {text: '董事长', value: '5'},\n            ],\n            width: '20%',\n        },];\n\n        const {deleteLoading, selectedRowKeys} = this.state;\n        const rowSelection = {\n            selectedRowKeys,\n            onChange: this.onSelectChange,\n        };\n        const hasSelected = selectedRowKeys.length > 0;\n\n\n        return (\n            <div>\n                <div style={{marginBottom: 16}}>\n                    <Button\n                        type=\"primary\"\n                        //onClick={this.start}\n                        disabled={!hasSelected}\n                        loading={deleteLoading}\n                    >\n                        Delete\n                    </Button>\n                    <span style={{marginLeft: 8}}>\n                        {hasSelected ? `Selected ${selectedRowKeys.length} items` : ''}\n                    </span>\n                </div>\n                <Table\n                    rowSelection={rowSelection}\n                    bordered={true}\n                    columns={columns}\n                    rowKey={record => record.id}\n                    dataSource={this.state.data}\n                    pagination={this.state.pagination}\n                    loading={this.state.loading}\n                    onChange={this.handleTableChange}\n                />\n            </div>\n\n        )\n    };\n}\n\nexport default MyTable;"]},"metadata":{},"sourceType":"module"}